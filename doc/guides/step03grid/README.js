Ext.data.JsonP.step03grid({"guide":"<h1 id='step03grid-section-step.3-grid-%E3%81%AB%E4%B8%80%E8%A6%A7%E8%A1%A8%E7%A4%BA'>Step.3 Grid に一覧表示</h1>\n<div class='toc'>\n<p><strong>Contents</strong></p>\n<ol>\n<li><a href='#!/guide/step03grid-section-model-%E3%82%92%E4%BD%9C%E6%88%90'>Model を作成</a></li>\n<li><a href='#!/guide/step03grid-section-list-%E3%83%93%E3%83%A5%E3%83%BC%E3%81%AE-viewmodel-%E3%81%AE%E4%BD%9C%E6%88%90'>List ビューの ViewModel の作成</a></li>\n<li><a href='#!/guide/step03grid-section-list-%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E4%BD%9C%E6%88%90'>List ビューを作成</a></li>\n<li><a href='#!/guide/step03grid-section-main-%E3%83%93%E3%83%A5%E3%83%BC%E3%81%AB%E9%85%8D%E7%BD%AE'>Main ビューに配置</a></li>\n</ol>\n</div>\n\n<p>Ext JS の花形コンポーネントである Grid を使って、名簿の一覧を表示します。\nビューの名前は List とします。\nデータは、Step.1 でセットアップした Ext Direct で取ってきます。</p>\n\n<p><p><img src=\"guides/step03grid/memo.png\" alt=\"\" width=\"600\" height=\"677\"></p></p>\n\n<blockquote><p>Ext Direct は Ajax の仕組みを元に動いていますので、\n通常ですと、他のサーバーからデータを取得することはできません。\n今回のサーバーは XHR2 の機能を使ってクロスドメインでのアクセスを許可しています。</p></blockquote>\n\n<h2 id='step03grid-section-model-%E3%82%92%E4%BD%9C%E6%88%90'>Model を作成</h2>\n\n<p><strong>app/model/List.js</strong></p>\n\n<pre><code>Ext.define('MyList.model.List', {\n    extend: 'Ext.data.Model',\n\n    fields: [\n        {name: 'group', type: 'number'}\n    ]\n\n});\n</code></pre>\n\n<ul>\n<li><code>fields</code> には全てのフィールドを設定する必要はありません</li>\n<li>サーバーから来るデータを全てセットされます</li>\n<li>項目が増えたら、サーバー側を直せばすみます</li>\n<li>クライアント側で何か特別なことをする場合のみ <code>fields</code> に定義します\n\n<ul>\n<li>この場合は <code>group</code> フィールドの型を <code>number</code> にしています</li>\n</ul>\n</li>\n</ul>\n\n\n<h2 id='step03grid-section-list-%E3%83%93%E3%83%A5%E3%83%BC%E3%81%AE-viewmodel-%E3%81%AE%E4%BD%9C%E6%88%90'>List ビューの ViewModel の作成</h2>\n\n<pre><code>Ext.define('MyList.view.list.ListModel', {\n    extend: 'Ext.app.ViewModel',\n    alias: 'viewmodel.list',\n    data: {\n        name: '名簿一覧'\n    },\n    stores: {\n        'liststore': {\n            model: 'MyList.model.List',\n            proxy: {\n                type: 'direct',\n                directFn: 'MyList.rpc.MyList.getGrid',\n                reader: {\n                    type: 'json',\n                    rootProperty: 'data'\n                }\n            },\n            remoteSort: true,\n            remoteFilter: true,\n            autoLoad: true\n        }\n    }\n});\n</code></pre>\n\n<ul>\n<li><code>stores</code></li>\n<li><code>proxy</code></li>\n<li><code>remoteSort</code></li>\n<li><code>remoteFilter</code></li>\n</ul>\n\n\n<h2 id='step03grid-section-list-%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E4%BD%9C%E6%88%90'>List ビューを作成</h2>\n\n<p><strong>app/view/list/List.js</strong></p>\n\n<pre><code>Ext.define('MyList.view.list.List',{\n\n    extend:     'Ext.grid.Panel',\n\n    xtype:      'mylist',\n\n    viewModel:  'list',\n\n    bind: '{liststore}',\n\n    columns: [{\n        dataIndex: 'id',\n        bind: {\n            text: '{label.id}'\n        }\n    }, {\n        dataIndex: 'name',\n        width: 200,\n        bind: {\n            text: '{label.name}'\n        }\n    }, {\n        dataIndex: 'kana',\n        width: 200,\n        bind: {\n            text: '{label.kana}'\n        }\n    }],\n\n    bbar: [{\n        xtype: 'pagingtoolbar',\n        bind: {\n            store: '{liststore}'\n        }\n    }]\n});\n</code></pre>\n\n<ul>\n<li><code>Ext.grid.Panel</code></li>\n<li><code>columns</code></li>\n<li><code>bbar</code></li>\n<li><code>pagingtoolbar</code></li>\n<li>ViewModel の <code>stores</code> に定義した <code>liststore</code> とバインド</li>\n</ul>\n\n\n<h2 id='step03grid-section-main-%E3%83%93%E3%83%A5%E3%83%BC%E3%81%AB%E9%85%8D%E7%BD%AE'>Main ビューに配置</h2>\n\n<p><strong>app/view/main/Main.js</strong></p>\n\n<pre><code>requires: [\n    'MyList.view.edit.Edit',\n    'MyList.view.list.List'\n],\n</code></pre>\n\n<p>と</p>\n\n<pre><code>    items:[{\n        xtype: 'mylist'\n    },{\n        xtype: 'myedit'\n    }]\n</code></pre>\n\n<ul>\n<li>List ビューを1枚目にセット、さきほどの Edit ビューは 2枚目に</li>\n<li>ソートやページングの動作を確認</li>\n<li><code>remoteSort</code> について再確認</li>\n</ul>\n\n","title":"Step.3 Grid に一覧表示"});