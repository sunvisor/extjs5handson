Ext.data.JsonP.step06group({"guide":"<h2 id='step06group-section-step.6-%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97'>Step.6 グループ</h2>\n\n<p>実はこの名簿はグループ分けされています。</p>\n\n<ul>\n<li>編集画面でグループを設定できるようにします。</li>\n<li>画面左側にグループ一覧を表示し、グループ毎に表示できるようにします。</li>\n</ul>\n\n\n<p><p><img src=\"guides/step06group/memo.png\" alt=\"\" width=\"600\" height=\"677\"></p></p>\n\n<h3 id='step06group-section-store-%E3%81%AE%E5%AE%9A%E7%BE%A9'>store の定義</h3>\n\n<ul>\n<li>まずグループの Store を定義します。</li>\n<li>今回は <code>data</code> プロパティで設定します。</li>\n<li>このようにクライアントサイドで固定でデータを持つこともできます。</li>\n<li>この Store は、Edit ビューと、後で作る Group ビュー 両方で使いますので、Main ビューで定義します。</li>\n</ul>\n\n\n<p><strong>app/view/main/MainModel.js</strong></p>\n\n<pre><code>stores: {\n    'groups': {\n        fields:[\n            'id',\n            'groupName'\n        ],\n\n        data: [\n            { 'id': 1, 'groupName': '家族' },\n            { 'id': 2, 'groupName': '親類' },\n            { 'id': 3, 'groupName': '友人' },\n            { 'id': 4, 'groupName': '知人' },\n            { 'id': 5, 'groupName': '同僚' },\n            { 'id': 6, 'groupName': '取引先' },\n            { 'id': 7, 'groupName': '勉強会' },\n            { 'id': 8, 'groupName': '同窓会' },\n            { 'id': 9, 'groupName': 'ネット' },\n            { 'id': 10, 'groupName': 'その他' }\n        ]\n    }\n}\n</code></pre>\n\n<h3 id='step06group-section-%E3%82%B3%E3%83%B3%E3%83%9C%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9%E3%81%AE%E5%88%A9%E7%94%A8'>コンボボックスの利用</h3>\n\n<ul>\n<li>コンボボックスでグループを入力できるようにします。</li>\n</ul>\n\n\n<p><strong>app/view/edit/Edit.js</strong></p>\n\n<pre><code>},{\n    xtype: 'combobox',\n    name: 'group',\n    bind: {\n        value: '{rec.group}',\n        fieldLabel: '{label.group}',\n        store: '{groups}'\n    },\n    valueField: 'id',\n    displayField: 'groupName'\n</code></pre>\n\n<ul>\n<li><code>xtype: 'combobox'</code></li>\n<li><code>bind</code></li>\n<li><code>store</code></li>\n<li><code>valueField</code></li>\n<li><code>displayField</code></li>\n</ul>\n\n\n<h3 id='step06group-section-grouplist-%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E8%BF%BD%E5%8A%A0'>GroupList ビューを追加</h3>\n\n<ul>\n<li>画面左側のグループ一覧のビューを作ります。</li>\n</ul>\n\n\n<p><strong>app/view/grouplist/GroupList.js</strong></p>\n\n<pre><code>Ext.define('MyList.view.grouplist.GroupList',{\n\n    extend: 'Ext.grid.Panel',\n\n    xtype: 'grouplist',\n\n    bind: {\n        store: '{groups}'\n    },\n\n    hideHeaders: true,\n\n    columns: [{\n        dataIndex: 'groupName',\n        flex: 1\n    }]\n\n});\n</code></pre>\n\n<ul>\n<li>ここでも Grid を使っています。</li>\n<li>カラムのヘッダは不要ですので、<code>hideHeaders</code> コンフィグで消しています。</li>\n<li>本当は、DataView コンポーネントを使ってやったほうが軽くなります。</li>\n<li><code>flex</code></li>\n</ul>\n\n\n<h3 id='step06group-section-main-%E3%83%93%E3%83%A5%E3%83%BC%E3%81%AB%E9%85%8D%E7%BD%AE'>Main ビューに配置</h3>\n\n<ul>\n<li>いま作ったビューを Main ビューに配置します。</li>\n</ul>\n\n\n<p><strong>app/view/main/Main.js</strong></p>\n\n<pre><code>requires: [\n    'MyList.view.edit.Edit',\n    'MyList.view.list.List',\n    'MyList.view.grouplist.GroupList'\n],\n</code></pre>\n\n<p>と</p>\n\n<pre><code>},{\n    region: 'west',\n    xtype: 'grouplist',\n    html: 'west',\n    width: 250,\n    split: true\n</code></pre>\n\n<ul>\n<li>表示を確認します。</li>\n</ul>\n\n\n<h3 id='step06group-section-%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%99%E3%82%8B'>フィルタリングする</h3>\n\n<ul>\n<li>画面左のグループを選択すると、中央のグリッドをそのグループのみにフィルタリングします。</li>\n</ul>\n\n\n<p><strong>app/view/main/Main.js</strong></p>\n\n<p><code>listeners</code> コンフィグを追加します。</p>\n\n<pre><code>    listeners: {\n        selectionchange: 'onGroupSelect'\n    }\n</code></pre>\n\n<ul>\n<li>west リージョンのパネルに追加</li>\n</ul>\n\n\n<p><strong>app/view/main/MainController.js</strong></p>\n\n<p>リスナーを実装します。</p>\n\n<pre><code>onGroupSelect: function(view, selected) {\n    var me = this,\n        list = me.lookupReference('mylist'),\n        store = list.getStore(),\n        groupId;\n\n    groupId = selected.length &gt; 0 ? selected[0].get('id') : null;\n    store.clearFilter();\n    if( groupId ) {\n        store.filter('group', groupId);\n    }\n}\n</code></pre>\n\n<ul>\n<li>選択されたグループ ID でフィルタをかけています。</li>\n<li><code>store.filter</code></li>\n<li><code>store.clearFilter</code></li>\n<li><code>remoteFilter</code></li>\n</ul>\n\n","title":"Step.6 グループ"});